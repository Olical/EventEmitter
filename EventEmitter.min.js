/*
 EventEmitter v1.0.0

 Copyright 2011, Oliver Caldwell (flowdev.co.uk)
 Dual licensed under the MIT or GPL Version 2 licenses.
 https://github.com/Wolfy87/EventEmitter
*/
function EventEmitter(){this._events={};this._listeners=[];this._maxListeners=10}EventEmitter.prototype._convertNameToRegExp=function(a){return a.replace(/\./g,"\\.").replace(/\*\./g,"[\\w\\-]+\\.").replace(/\*$/gi,".+")};
EventEmitter.prototype.addListener=function(a,d,b){var c=this._listeners.length;this.emit("newListener",a,d);this._listeners.push({listener:d,once:b?!0:!1});a=this._convertNameToRegExp(a);typeof this._events[a]==="undefined"&&(this._events[a]=[]);this._events[a].push(c);this._events[a].length===this._maxListeners&&console.log("Maximum number of listeners ("+this._maxListeners+') reached for the "'+a+'" event!')};EventEmitter.prototype.on=EventEmitter.prototype.addListener;
EventEmitter.prototype.once=function(a,d){this.addListener(a,d,!0)};EventEmitter.prototype.removeListener=function(a,d){var b=null,c=null;a=this._convertNameToRegExp(a);if(this._events[a]instanceof Array){c=this._events[a];for(b=0;b<c.length;b++)this._listeners[c[b]].listener===d&&c.splice(b,1)}};EventEmitter.prototype.removeAllListeners=function(a){a=this._convertNameToRegExp(a);this._events[a]=[]};EventEmitter.prototype.setMaxListeners=function(a){this._maxListeners=a};
EventEmitter.prototype.listeners=function(a,d){var b=null,c=null,f=[],e=null;for(b in this._events)if(a.match(RegExp("^"+b+"$"))&&this._events[b]instanceof Array){indexes=this._events[b];for(c=0;c<indexes.length;c++)e=this._listeners[indexes[c]],d?e.once?(f.push(e.listener),this._events[b].splice(c,1)):f.push(e.listener):f.push(e.listener)}return f};
EventEmitter.prototype.emit=function(a){var d=null,b=Array.prototype.slice.call(arguments),c=this.listeners(a,!0);b.splice(0,1);for(d=0;d<c.length;d++)c[d].apply(null,b)};
